<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Fraud Detection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Inter', sans-serif; }
        .container { max-width: 900px; }
        .card { border: none; box-shadow: 0 6px 12px rgba(0,0,0,0.1); }
        .form-label { font-weight: 500; }
        #result-card { display: none; margin-top: 2rem; }
        .result-title { font-size: 1.75rem; font-weight: bold; }
        .alert-fraud { background-color: #f8d7da; color: #721c24; border-left: 5px solid #721c24;}
        .alert-suspicious { background-color: #fff3cd; color: #856404; border-left: 5px solid #856404;}
        .alert-legitimate { background-color: #d4edda; color: #155724; border-left: 5px solid #155724;}
        .btn-primary { background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%); border: none;}
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container my-5">
        <div class="text-center mb-4">
            <h1 class="display-5">ðŸ’³ Credit Card Fraud Detection</h1>
            <p class="lead">Enter transaction details to predict the likelihood of fraud.</p>
        </div>

        <div class="card p-4">
            <form id="prediction-form">
                <h5 class="mb-3 border-bottom pb-2">Transaction Details</h5>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="step" class="form-label">Step (Time)</label>
                        <input type="number" class="form-control" id="step" required value="1">
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="type" class="form-label">Type</label>
                        <select class="form-select" id="type" required>
                            <option value="PAYMENT">PAYMENT</option>
                            <option value="TRANSFER">TRANSFER</option>
                            <option value="CASH_OUT">CASH_OUT</option>
                            <option value="DEBIT">DEBIT</option>
                            <option value="CASH_IN">CASH_IN</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="amount" class="form-label">Amount</label>
                        <input type="number" step="any" class="form-control" id="amount" required value="9839.64">
                    </div>
                </div>

                <h5 class="mb-3 mt-3 border-bottom pb-2">Originator Account</h5>
                 <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="oldbalanceOrg" class="form-label">Old Balance (Origin)</label>
                        <input type="number" step="any" class="form-control" id="oldbalanceOrg" required value="170136.0">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="newbalanceOrig" class="form-label">New Balance (Origin)</label>
                        <input type="number" step="any" class="form-control" id="newbalanceOrig" required value="160296.36">
                    </div>
                </div>

                <h5 class="mb-3 mt-3 border-bottom pb-2">Destination Account</h5>
                 <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="oldbalanceDest" class="form-label">Old Balance (Destination)</label>
                        <input type="number" step="any" class="form-control" id="oldbalanceDest" required value="0.0">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="newbalanceDest" class="form-label">New Balance (Destination)</label>
                        <input type="number" step="any" class="form-control" id="newbalanceDest" required value="0.0">
                    </div>
                </div>

                <div class="d-grid mt-4">
                    <button type="submit" class="btn btn-primary btn-lg">Analyze Transaction</button>
                </div>
            </form>
        </div>

        <div id="result-card" class="card p-4">
            <h4 class="mb-3">Prediction Result</h4>
            <div id="result-content" class="p-3 rounded-3">
                <p class="mb-2"><strong>Status:</strong> <span id="prediction_class" class="result-title"></span></p>
                <p class="mb-2"><strong>Confidence Score:</strong> <span id="confidence_score" class="fw-bold fs-5"></span></p>
                <p class="mb-2"><strong>Confidence Level:</strong> <span id="confidence_level" class="fw-bold badge fs-6"></span></p>
                <hr>
                <p class="mb-0"><strong>Recommended Action:</strong> <span id="recommended_action"></span></p>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('prediction-form').addEventListener('submit', async function (e) {
            e.preventDefault();

            const data = {
                step: parseInt(document.getElementById('step').value),
                type: document.getElementById('type').value,
                amount: parseFloat(document.getElementById('amount').value),
                oldbalanceOrg: parseFloat(document.getElementById('oldbalanceOrg').value),
                newbalanceOrig: parseFloat(document.getElementById('newbalanceOrig').value),
                oldbalanceDest: parseFloat(document.getElementById('oldbalanceDest').value),
                newbalanceDest: parseFloat(document.getElementById('newbalanceDest').value)
            };

            const response = await fetch('https://lastone-aj8c.onrender.com/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data),
            });

            const result = await response.json();
            const resultCard = document.getElementById('result-card');
            const resultContent = document.getElementById('result-content');
            const confidenceLevelBadge = document.getElementById('confidence_level');

            document.getElementById('prediction_class').textContent = result.prediction_class;
            document.getElementById('confidence_score').textContent = result.confidence_score;
            confidenceLevelBadge.textContent = result.confidence_level;
            document.getElementById('recommended_action').textContent = result.recommended_action;

            resultContent.className = 'p-3 rounded-3'; // Reset classes
            confidenceLevelBadge.className = 'fw-bold badge fs-6'; // Reset classes

            if (result.prediction_class === 'Fraud') {
                resultContent.classList.add('alert-fraud');
                confidenceLevelBadge.classList.add('bg-danger');
            } else if (result.prediction_class === 'Suspicious') {
                resultContent.classList.add('alert-suspicious');
                confidenceLevelBadge.classList.add('bg-warning', 'text-dark');
            } else {
                resultContent.classList.add('alert-legitimate');
                confidenceLevelBadge.classList.add('bg-success');
            }
            
            resultCard.style.display = 'block';
            resultCard.scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>
